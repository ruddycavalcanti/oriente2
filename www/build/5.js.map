{"version":3,"sources":["../../src/pages/my-profile/my-profile.module.ts","../../src/providers/pontos-services.ts","../../src/models/ponto.ts","../../src/pages/my-profile/my-profile.ts"],"names":[],"mappings":"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","file":"5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { MyProfile } from './my-profile';\nimport { PontosServices } from '../../providers/pontos-services';\n\n\n@NgModule({\n    declarations: [\n      MyProfile,\n    ],\n    imports: [\n      IonicPageModule.forChild(MyProfile),\n    ],\n    entryComponents: [\n      MyProfile\n    ],\n    providers:[\n      PontosServices\n    ]\n  })\n  export class MyProfileModule {}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/my-profile/my-profile.module.ts","import { Injectable } from '@angular/core';\n\nimport {  AngularFireDatabase } from 'angularfire2/database';\n\n\n\nimport { Ponto } from '../models/ponto';\n//import { Utils } from '../utils/utils';\n\n\n\n@Injectable()\nexport class PontosServices {\n\n \n\n  constructor( private dbFire:AngularFireDatabase\n    //, public utils:Utils\n  ){\n\n   }\n\n    listar(){\n       return this.dbFire.list('pontos').valueChanges();\n    }\n\n\n\n  savePost(\n    post_author_id,\n    post_author_email,\n    pontos_totais,\n    pontos_atuais\n  ){\n\n   //let post_dia  = this.utils.getTime;\n\n    //let post_dia_new =   post_dia[8] +  post_dia[9] + \"/\" +   post_dia[5] +   post_dia[6] + \"/\"+  post_dia[0] +    post_dia[1] +   post_dia[2] +   post_dia[3] ;\n\n\n    return this.dbFire.database.ref(\"pontos/\"  + post_author_id)\n    .update(  new Ponto(\n      post_author_email,\n      //post_dia,\n      post_author_id,\n      pontos_totais,\n      pontos_atuais\n       ));\n       \n\n\n  }\n\n\n\n\n  updatePontos(post_author_id, pontos_atuais,pontos_totais){\n    return this.dbFire.database.ref(\"pontos/\"  + post_author_id).update({\n      pontos_atuais:pontos_atuais,\n      pontos_totais:pontos_totais\n    })\n  }\n\n  updatePontosAtuais(post_author_id, pontos_atuais){\n    return this.dbFire.database.ref(\"pontos/\"  + post_author_id).update({\n      pontos_atuais:pontos_atuais\n    })\n  }\n  updatePontosTotais(post_author_id, pontos_totais){\n    return this.dbFire.database.ref(\"pontos/\"  + post_author_id).update({\n      pontos_totais:pontos_totais\n    });\n  }\n\n\n  getPontosTotais(post_author_id){\n    return this.dbFire.database.ref(\"pontos/\"  + post_author_id).once( \"value\").then(result=>{\n      return result.val().pontos_totais;\n    });\n  }\n\n  getPontosAtuais(post_author_id){\n    return this.dbFire.database.ref(\"pontos/\"  + post_author_id).once( \"value\").then(result=>{\n      return result.val().pontos_atuais;\n    });\n  }\n\n  getPontosAeT(post_author_id){\n    return this.dbFire.database.ref(\"pontos/\"  + post_author_id).once( \"value\");\n  }\n\n\n\n\n\n  removePost( post_uid){\n\n    return this.dbFire.list(\"/pontos/\" +  post_uid).remove();\n    \n    \n  }\n\n\n\n\n\n\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/providers/pontos-services.ts","\nexport  class Ponto {\n\n  \n\n   constructor(\n   public post_author_email:string,\n    public post_author_id:string,\n   public pontos_totais:number,\n   public  pontos_atuais:number\n\n  ){}\n\n  set_post_author_id(post_author_id){\n    this.post_author_id = post_author_id;\n  }\n\n  get_post_author_id(){\n    return this.post_author_id;\n  }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/models/ponto.ts","import { Component } from '@angular/core';\nimport { NavController, ToastController, NavParams, IonicPage } from 'ionic-angular';\n\n\nimport { AuthProvider } from '../../providers/auth-provider';\n\n//import { EditProfile } from '../edit-profile/edit-profile';\n\nimport {  AngularFireDatabase } from 'angularfire2/database';\n//import { Storage } from '@ionic/storage';\nimport { PontosServices } from '../../providers/pontos-services';\n\n//import { InAppBrowser,InAppBrowserOptions, InAppBrowserEvent } from '@ionic-native/in-app-browser';\n\n\n@IonicPage({\n  name: 'perfil',\n  segment: 'perfil'\n  }) \n@Component({\n  selector: 'page-my-profile',\n  templateUrl: 'my-profile.html'\n})\nexport class MyProfile { \n\n\n\n  nome:any;\n  email:any;\n  user_image:any;\n  user_tipo:any;\n\n  pontos_atuais:any;\n\n  constructor(public navCtrl: NavController,\n    public navParams:NavParams,\n     public toastCtrl:ToastController , \n     public dbFire: AngularFireDatabase,\n     public authProvider:AuthProvider ,\n    public pontoServices:PontosServices\n ) {\n\n    }\n\n     \n\n\nionViewDidLoad(){\n\n\n\n      this.email = this.authProvider.currentUserEmail;\n  \n\n      var email2 =  this.email .replace(\".\" , \",\");\n\n      this.dbFire.database.ref(\"/users/\" + email2 ).once( \"value\").then(snapshot=> {\n    \n          if(snapshot.val() !=null){\n\n            console.log(snapshot.val());\n\n            this.user_image = snapshot.val().user_photoURL;\n            if(this.user_image==\"\" || this.user_image == null){\n              this.user_image = \"assets/imgs/no_avatar.jpg\";\n            }\n      \n            this.nome =   snapshot.val().user_displayName;\n            this.user_tipo = snapshot.val().user_tipo;\n            \n          }\n\n\n\n        }).catch(error => {\n        });\n\n        this.getPontosAtuais();\n}\n\n\n\n\n\ngetPontosAtuais(){\n  this.pontoServices.getPontosAtuais(this.authProvider.currentUserId).then(snapshot=> {\n    this.pontos_atuais = snapshot;\n  }).catch(error => {\n    this.pontos_atuais = 0;\n  });\n}\n\n\n  irParaEditProfile(){\n      this.navCtrl.push(\"editar-perfil\");\n  }\n\n \n\n  \n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/my-profile/my-profile.ts"],"sourceRoot":""}