{"version":3,"sources":["../../src/pages/add-edit-noticias/add-edit-noticias.module.ts","../../src/providers/noticias-services.ts","../../src/models/noticia.ts","../../src/pages/add-edit-noticias/add-edit-noticias.ts"],"names":[],"mappings":"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","file":"10.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { AddEditNoticiaPage } from './add-edit-noticias';\nimport { NoticiasServices} from '../../providers/noticias-services';\n\n@NgModule({\n    declarations: [\n      AddEditNoticiaPage,\n    ],\n    imports: [\n      IonicPageModule.forChild(AddEditNoticiaPage),\n    ],\n    entryComponents: [\n      AddEditNoticiaPage\n    ],\n    providers:[\n      NoticiasServices\n    ]\n  })\n  export class AddEditNoticiasModule {}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/add-edit-noticias/add-edit-noticias.module.ts","import { Injectable } from '@angular/core';\n\nimport * as firebase from 'firebase/app';\n\nimport {  AngularFireDatabase } from 'angularfire2/database';\n\nimport { Utils } from '../utils/utils';\n\n\nimport { Noticia } from '../models/noticia';\n\n\n\n@Injectable()\nexport class NoticiasServices {\n\n \n\n  constructor(\n   private dbFire:AngularFireDatabase,   private  utils:Utils){\n\n   }\n\n    listar(){\n     \n       //return this.dbFire.list('noticias').valueChanges();\n       return  this.dbFire.list('/noticias/'  ).valueChanges().map((array)=>array.reverse())\n    }\n\n\n\n\n  savePost(\n    post_uid,\n    post_date,\n    post_nome,\n    post_description,\n    post_conteudo,\n    post_image,\n    is_edit\n  ){\n\n    if(is_edit != true){ // If its a new post\n      post_date  = this.utils.getTime;\n    }\n\n    return this.dbFire.database.ref(\"noticias/\"  + post_uid)\n    .update(  new Noticia(\n      post_uid,\n      post_date,\n      post_nome,\n        post_conteudo,\n        post_image,\n        post_description,\n       ));\n    \n\n\n  }\n\n\n\n\n  removePost( post_uid){\n\n    return this.dbFire.list(\"/noticias/\" +  post_uid).remove();\n    \n    \n  }\n\n\n  uploadPhotoStorage(post_image , post_uid){\n\n\n    let storageRef = firebase.storage().ref();\n\n    const imageRef = storageRef.child('images/noticias/'+post_uid+'.jpg');\n\n    return  imageRef.putString(post_image, firebase.storage.StringFormat.DATA_URL);\n\n  }\n\n  removePhotoStorage(post_uid){\n    let storageRef = firebase.storage().ref();\n\n    return storageRef.child('images/noticias/'+post_uid+'.jpg').delete();\n\n\n  }\n  \n  updatePhotoDb(post_image , post_uid){\n\n   return  this.dbFire.database.ref(\"noticias/\"+  post_uid).update({ \n      post_image: post_image\n     });\n\n  }\n\n\n\n\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/providers/noticias-services.ts","\nexport  class Noticia {\n\n  \n\n   constructor(\n   public post_uid:string,\n   public post_date:string,\n    public post_name:string,\n   public post_content:string,\n   public  post_image:string,\n   public post_description:string\n\n  ){}\n\n  set_post_name(post_name){\n    this.post_name = post_name;\n  }\n\n  get_post_name(){\n    return this.post_name;\n  }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/models/noticia.ts","import { Component, ViewChild} from '@angular/core';\nimport { NavController, ToastController, ActionSheetController, LoadingController, NavParams, AlertController, IonicPage } from 'ionic-angular';\n\n\nimport { NgForm } from '@angular/forms';\nimport { AuthProvider } from '../../providers/auth-provider';\n\n\nimport {  AngularFireDatabase } from 'angularfire2/database';\n\nimport { Camera } from '@ionic-native/camera';\n\nimport 'firebase/storage';\n\n\nimport { AngularFireAuth } from 'angularfire2/auth';\n\nimport { NoticiasServices} from '../../providers/noticias-services';\n\nimport { Storage } from '@ionic/storage';\n\n@IonicPage({\n\tname: 'edit-noticias',\n  segment: 'edit-noticias'\n  }) \n@Component({\n  selector: 'page-add-edit-noticias',\n  templateUrl: 'add-edit-noticias.html'\n})\nexport class AddEditNoticiaPage   {\n\n @ViewChild('fileInput') fileInput;\n\n  \n\n post:any;\n  post_name:any;\n  email:any;\n  post_description:any;\n  post_content:any;\n  post_uid:any;\n  post_date:any;\n\n  post_image:any;\n  downloadURL:any;\n  title:any;\n\n\n\n   email2 :any;\n\n  captureDataUrl:any;\n\n\n  actionAddPhoto:any;\n\n  is_edit:any;\n\n  \n  user_notificacao: boolean;\n\n  loading:any;\n  \n  constructor(public navCtrl: NavController,\n    public navParams:NavParams,\n     public toastCtrl:ToastController , \n     private camera: Camera,\n    public dbFire: AngularFireDatabase,\n    public navParms : NavParams,\n    public authProvider:AuthProvider,\n    public actionSheetCtrl: ActionSheetController,\n  public afAuth:AngularFireAuth,\n  public loadingCtrl: LoadingController,\npublic alertCtrl:AlertController,\npublic noticiasServices:NoticiasServices,\npublic storage: Storage\n) {\n\n   \n\n  }\n\n\n  ionViewDidLoad(){\n\n    this.storage.get('email').then((email) => {\n        this.email = email;\n    });\n\n\n\n   this.post_image = \"assets/imgs/noImage.jpg\";\n\n    this.is_edit = this.navParms.get(\"is_edit\");\n    if(this.is_edit ==true){\n\n        \n      this.title = \"Edit \";\n\n\n\n      this.post = this.navParams.get('post');\n      this.post_name =  this.post.post_name;\n      this.post_description =   this.post.post_description;\n      this.post_date = this.post.post_date;\n      this.post_content = this.post.post_content;\n\n      this.post_uid = this.post.post_uid;\n\n      this.post_image =   this.post.post_image;\n      if(this.post_image==\"\"){\n        this.post_image = \"assets/imgs/noImage.jpg\";\n      }\n\n      \n\n\n    }else{\n\n      this.title = \"Add Noticia\";\n        this.post_uid = this.dbFire.database.ref().child('noticias/').push().key;\n    \n\n        \n\n    }\n\n    \n\n\n\n    this.loading = this.loadingCtrl.create({\n\t\t\tcontent: 'Please, wait...',\n\t\t\tduration: 5000\n    });\n    \n  \n\n    \n  }\n\n  createToast(message){\n    this.toastCtrl.create({\n      message: message,\n      duration: 5000,\n      position: 'middle'\n      }).present();\n  }\n  \n\n\n\n\n  createActionAddPhoto(){\n    this.actionAddPhoto = this.actionSheetCtrl.create({\n      title: 'Tirar Foto',\n      buttons: [\n        {\n          text: 'Escolher uma foto da galeria',\n          handler: () => {\n            this.getPicture(this.camera.PictureSourceType.PHOTOLIBRARY);\n          }\n        },\n        {\n          text: 'Tirar uma foto da Camera',\n          handler: () => {\n            this.getPicture(this.camera.PictureSourceType.CAMERA);\n          }\n        },\n        {\n          text: 'Cancelar',\n          role: 'cancel',\n          handler: () => {\n            console.log('Cancel clicked');\n          }\n        }\n      ]\n    });\n  \n    this.actionAddPhoto.present();\n  }\n\n    \naddPhoto() {\n  \n\n  this.createActionAddPhoto();\n\n}\n\n\n\n\n getPicture(sourceType) {\n\n\n        if (Camera['installed']()) {\n          this.camera.getPicture({\n            destinationType: this.camera.DestinationType.DATA_URL,\n            encodingType: this.camera.EncodingType.JPEG,\n            mediaType: this.camera.MediaType.PICTURE,\n            sourceType: sourceType,\n            targetWidth: 100,\n            targetHeight: 100,\n             quality: 90,\n             allowEdit: true,\n             correctOrientation:true\n          }).then((imageData) => {\n\n          \n\n            this.captureDataUrl = 'data:image/jpeg;base64,' + imageData;\n            this.post_image =  'data:image/jpeg;base64,' + imageData;\n            this.actionAddPhoto.dismiss();\n            \n            \n          }, (error) => {\n            this.createToast(error);\n          })\n        } else {\n          this.fileInput.nativeElement.click();\n          // go to processWebImage method. //  ir para o método processWebImage\n\n        }\n   \n  }\n\n\n\n\n\n  processWebImage(event) {\n  \n    let reader = new FileReader();\n    reader.onloadend = (readerEvent) => {\n\n        let imageData = (readerEvent.target as any).result;\n\n          this.captureDataUrl = imageData;\n        this.post_image = imageData;\n\n        this.actionAddPhoto.dismiss();\n\n    }\n\n    reader.readAsDataURL(event.target.files[0]);\n\n  }\n\n\n  saveImageFirebase(imageData){\n\n    this.noticiasServices.uploadPhotoStorage(imageData,this.post_uid).then(result=>{\n\n      this.noticiasServices.updatePhotoDb(result.downloadURL,this.post_uid).then(result=>{\n\n\n        this.loading.dismiss();\n        this.createToast(\"Informação atualizada com sucesso.\");\n         this.navCtrl.setRoot(\"home\");\n\n\n        }).catch(error=>{\n          this.loading.dismiss();\n          this.createToast(error);\n        });\n\n\n    }).catch(error=>{\n      this.loading.dismiss();\n      this.createToast(error);\n    });\n\n  }\n\n\n\n\n  salvarEdit(form: NgForm){\n\n    \n    let  post_name = form.value.post_name;\n    let  post_descricao = form.value.post_description;\n\n    let post_content = form.value.post_content;\n\n    this.loading.present();\n\n\n    this.noticiasServices.savePost(\n      this.post_uid,\n      this.post_date,\n      post_name,\n      post_descricao,\n      post_content,\n      this.post_image,\n      this.is_edit\n\n    ).then(result=>{\n      \n\n      if(this.captureDataUrl!=undefined){\n        this.saveImageFirebase( this.post_image);\n      }else{\n        this.loading.dismiss();\n        this.createToast(\"Informação atualizada com sucesso.\");\n       this.navCtrl.setRoot(\"home\");\n      }\n\n\n\n    }).catch(error=>{\n      this.loading.dismiss();\n      this.createToast(error);\n    });\n\n\n\n  }\n\n\n\n\napagar() {\n\n \n  let confirmarRemocao = this.toastCtrl.create({\n    message: 'Post removido com sucesso.',\n    duration: 3000,\n    position: 'middle'\n  });\n\n\n  let alert = this.alertCtrl.create({\n    title: 'Remover Show',\n    message: 'Tem certeza que deseja remover o show ' + this.post_name +'?',\n    buttons: [\n      {\n        text: 'Cancelar',\n        role: 'cancel',\n        handler: () => {\n          //console.log('Cancel clicked');\n        }\n      },\n      {\n        text: 'Remover',\n        handler: () => {\n\n          this.noticiasServices.removePost( this.post_uid).then(result=>{\n           \n            // categoriaRemove.remove().then(result=> {\n              confirmarRemocao.present();\n              this.navCtrl.setRoot(\"home\");\n\n              this.noticiasServices.removePhotoStorage(this.post_uid).catch(error=>{\n                \n              });\n\n         // });\n          }).catch(error=>{\n            this.createToast(error);\n          });\n           \n           \n\n        }\n      }\n    ]\n  });\n  alert.present();\n  \n}\n\n\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/add-edit-noticias/add-edit-noticias.ts"],"sourceRoot":""}