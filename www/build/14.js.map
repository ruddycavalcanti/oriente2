{"version":3,"sources":["../../src/pages/add-edit-destaques/add-edit-destaques.module.ts","../../src/providers/destaques-services.ts","../../src/models/destaque.ts","../../src/pages/add-edit-destaques/add-edit-destaques.ts"],"names":[],"mappings":"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","file":"14.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { AddEditDestaquesPage } from './add-edit-destaques';\nimport { DestaquesServices } from '../../providers/destaques-services';\n\n@NgModule({\n    declarations: [\n        AddEditDestaquesPage,\n    ],\n    imports: [\n      IonicPageModule.forChild(AddEditDestaquesPage),\n    ],\n    entryComponents: [\n      AddEditDestaquesPage\n    ],\n    providers:[\n      DestaquesServices\n    ]\n  })\n  export class AddEditDestaquesModule {}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/add-edit-destaques/add-edit-destaques.module.ts","import { Injectable } from '@angular/core';\n\nimport * as firebase from 'firebase/app';\n\nimport {  AngularFireDatabase } from 'angularfire2/database';\n\n\n\nimport { Destaque } from '../models/destaque';\n\n\n\n@Injectable()\nexport class DestaquesServices {\n\n \n\n  constructor(\n   private dbFire:AngularFireDatabase){\n\n   }\n \n    listar(){\n     \n       //return this.dbFire.list('destaques').valueChanges();\n\n\n       return  this.dbFire.list('/destaques/' , \n       ref => ref.orderByChild('order') \n       ).valueChanges().map((array)=>array.reverse()  )\n\n    }\n\n\n\n  savePost(\n    action,\n    actionValue,\n    post_image,\n    desc,\n    titulo,\n    post_uid,\n    order:number\n  ){\n\n\n\n    return this.dbFire.database.ref(\"destaques/\"  + post_uid)\n    .update(  new Destaque(\n        action,\n        actionValue,\n        post_image,\n        desc,\n        titulo,\n        post_uid,\n        order\n       ));\n    \n\n\n  }\n\n\n\n\n  removePost( post_uid){\n\n    return this.dbFire.list(\"destaques/\" +  post_uid).remove();\n    \n    \n  }\n\n\n  uploadPhotoStorage(post_image , post_uid){\n\n\n    let storageRef = firebase.storage().ref();\n\n    const imageRef = storageRef.child('images/destaques/'+post_uid+'.jpg');\n\n    return  imageRef.putString(post_image, firebase.storage.StringFormat.DATA_URL);\n\n  }\n \n  removePhotoStorage(post_uid){\n    let storageRef = firebase.storage().ref();\n\n    return storageRef.child('images/destaques/'+post_uid+'.jpg').delete();\n\n\n  }\n\n  updatePhotoDb(post_image , post_uid){\n\n    return  this.dbFire.database.ref(\"destaques/\"+  post_uid).update({ \n       post_image: post_image\n      });\n \n   }\n\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/providers/destaques-services.ts","\nexport  class Destaque {\n\n  \n\n   constructor(\n    public action:string,\n    public actionValue:string,\n   public post_image:string,\n   public desc:string,\n   public  titulo:string,\n   public  post_uid:string,\n   public  order:number,\n  ){}\n\n  set_actiond(action){\n    this.action = action;\n  }\n\n  get_action(){\n    return this.action;\n  }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/models/destaque.ts","import { Component, ViewChild} from '@angular/core';\nimport { NavController, ToastController, IonicPage, ActionSheetController, LoadingController, NavParams, AlertController} from 'ionic-angular';\n\n\nimport { NgForm } from '@angular/forms';\nimport { AuthProvider } from '../../providers/auth-provider';\n\n\nimport {  AngularFireDatabase } from 'angularfire2/database';\n\nimport { Camera } from '@ionic-native/camera';\n\nimport 'firebase/storage';\n\n\nimport { AngularFireAuth } from 'angularfire2/auth';\n\nimport { DestaquesServices } from '../../providers/destaques-services';\n\n\n@IonicPage({\n  name: 'edit-destaques',\n  segment: 'edit-destaques'\n})\n@Component({\n  selector: 'add-edit-destaques',\n  templateUrl: 'add-edit-destaques.html'\n})\nexport class AddEditDestaquesPage   {\n\n @ViewChild('fileInput') fileInput;\n\n  \n\n post:any;\n  titulo:any;\n  email:any;\n  action:any;\n  actionValue:any;\n  desc:any;\n  post_uid:any;\n\n  post_image:any;\n  downloadURL:any;\n  title:any;\n\n\n\n   email2 :any;\n\n  captureDataUrl:any;\n\n\n  actionAddPhoto:any;\n\n  is_edit:any;\n\n  order:any;\n\n  \n  user_notificacao: boolean;\n\n  loading:any;\n  \n  constructor(public navCtrl: NavController,\n    public navParams:NavParams,\n     public toastCtrl:ToastController , \n     private camera: Camera,\n    public dbFire: AngularFireDatabase,\n    public navParms : NavParams,\n    public authProvider:AuthProvider,\n    public actionSheetCtrl: ActionSheetController,\n  public afAuth:AngularFireAuth,\n  public loadingCtrl: LoadingController,\npublic alertCtrl:AlertController\n,public destaqueServices:DestaquesServices\n) {\n\n  }\n\n\n  ionViewDidLoad(){\n\n\n   this.post_image = \"assets/imgs/noImage.jpg\";\n\n\n    this.is_edit = this.navParms.get(\"is_edit\");\n    if(this.is_edit ==true){\n\n\n      this.post = this.navParams.get('post');\n\n\n      this.title = \"Edit \";\n      \n      this.action =  this.post.action;\n      this.actionValue =   this.post.actionValue;\n      this.desc =   this.post.desc;\n      this.titulo = this.post.titulo;\n      this.post_uid = this.post.post_uid;\n\n      this.order = this.post.order;\n\n      this.post_image =   this.post.post_image;\n      if(this.post_image==\"\"){\n        this.post_image = \"assets/imgs/noImage.jpg\";\n      }\n      \n\n    }else{\n\n      this.title = \"Add Destaque\";\n        this.post_uid = this.dbFire.database.ref().child('destaques/').push().key;\n    \n        \n    }\n\n    this.loading = this.loadingCtrl.create({\n\t\t\tcontent: 'Por favor, aguarde...',\n\t\t\tduration: 5000\n    });\n    \n    \n  }\n\n\n  irParaAdd(){\n    this.navCtrl.push(\"edit-destaques\", {\n      is_edit:false\n    });\n  }\n\n\n  createToast(message){\n    this.toastCtrl.create({\n      message: message,\n      duration: 5000,\n      position: 'middle'\n      }).present();\n  }\n  \n\n\n\ncreateActionAddPhoto(){\n  this.actionAddPhoto = this.actionSheetCtrl.create({\n    title: 'Tirar Foto',\n    buttons: [\n      {\n        text: 'Escolher uma foto da galeria',\n        handler: () => {\n          this.getPicture(this.camera.PictureSourceType.PHOTOLIBRARY);\n        }\n      },\n      {\n        text: 'Tirar uma foto da Camera',\n        handler: () => {\n          this.getPicture(this.camera.PictureSourceType.CAMERA);\n        }\n      },\n      {\n        text: 'Cancelar',\n        role: 'cancel',\n        handler: () => {\n          console.log('Cancel clicked');\n        }\n      }\n    ]\n  });\n\n  this.actionAddPhoto.present();\n}\n\n    \naddPhoto() {\n  \n\n  this.createActionAddPhoto();\n\n}\n\n\n\n\n getPicture(sourceType) {\n\n\n        if (Camera['installed']()) {\n          this.camera.getPicture({\n            destinationType: this.camera.DestinationType.DATA_URL,\n            encodingType: this.camera.EncodingType.JPEG,\n            mediaType: this.camera.MediaType.PICTURE,\n            sourceType: sourceType,\n            targetWidth: 100,\n            targetHeight: 100,\n             quality: 90,\n             allowEdit: true,\n             correctOrientation:true\n          }).then((imageData) => {\n\n          \n\n            this.captureDataUrl = 'data:image/jpeg;base64,' + imageData;\n            this.post_image =  'data:image/jpeg;base64,' + imageData;\n            this.actionAddPhoto.dismiss();\n            \n            \n          }, (error) => {\n            this.createToast(error);\n          })\n        } else {\n          this.fileInput.nativeElement.click();\n          // go to processWebImage method. //  ir para o método processWebImage\n\n        }\n   \n  }\n\n\n\n\n\n  processWebImage(event) {\n  \n    let reader = new FileReader();\n    reader.onloadend = (readerEvent) => {\n\n        let imageData = (readerEvent.target as any).result;\n\n          this.captureDataUrl = imageData;\n        this.post_image = imageData;\n\n        this.actionAddPhoto.dismiss();\n\n    }\n\n    reader.readAsDataURL(event.target.files[0]);\n\n  }\n\n\n  saveImageFirebase(imageData){\n\n    this.destaqueServices.uploadPhotoStorage(imageData,this.post_uid).then(result=>{\n\n      this.destaqueServices.updatePhotoDb(result.downloadURL,this.post_uid).then(result=>{\n\n\n        this.loading.dismiss();\n        this.createToast(\"Informação atualizada com sucesso.\");\n         this.navCtrl.setRoot(\"home\");\n\n\n        }).catch(error=>{\n          this.loading.dismiss();\n          this.createToast(error);\n        });\n\n\n    }).catch(error=>{\n      this.loading.dismiss();\n      this.createToast(error);\n    });\n\n  }\n\n\n\n\n  salvarEdit(form: NgForm){\n\n    \n    let  titulo = form.value.titulo;\n    let  desc = form.value.desc;\n    let action = form.value.action;\n    let actionValue = form.value.actionValue;\n\n    let order:number = form.value.order; \n\n    this.loading.present();\n\n\n    this.destaqueServices.savePost(\n      action,\n      actionValue,\n      this.post_image, //post_image\n      desc,\n      titulo,\n      this.post_uid,\n      order\n\n    ).then(result=>{\n      \n\n      if(this.captureDataUrl!=undefined){\n        this.saveImageFirebase( this.post_image);\n      }else{\n        this.loading.dismiss();\n        this.createToast(\"Informação atualizada com sucesso.\");\n       this.navCtrl.setRoot(\"home\");\n      }\n\n\n\n    }).catch(error=>{\n      this.loading.dismiss();\n      this.createToast(error);\n    });\n\n\n\n  }\n\n\n\n\napagar() {\n\n \n  let confirmarRemocao = this.toastCtrl.create({\n    message: 'Post removido com sucesso.',\n    duration: 3000,\n    position: 'middle'\n  });\n\n\n  let alert = this.alertCtrl.create({\n    title: 'Remover Destaque',\n    message: 'Tem certeza que deseja remover o post ' + this.titulo +'?',\n    buttons: [\n      {\n        text: 'Cancelar',\n        role: 'cancel',\n        handler: () => {\n          //console.log('Cancel clicked');\n        }\n      },\n      {\n        text: 'Remover',\n        handler: () => {\n\n          this.destaqueServices.removePost( this.post_uid).then(result=>{\n           \n            // categoriaRemove.remove().then(result=> {\n              confirmarRemocao.present();\n              this.navCtrl.setRoot(\"home\");\n\n              this.destaqueServices.removePhotoStorage(this.post_uid).catch(error=>{\n           \n              });\n\n         // });\n          }).catch(error=>{\n            this.createToast(error);\n          });\n           \n           \n\n        }\n      }\n    ]\n  });\n  alert.present();\n  \n}\n\n\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/add-edit-destaques/add-edit-destaques.ts"],"sourceRoot":""}